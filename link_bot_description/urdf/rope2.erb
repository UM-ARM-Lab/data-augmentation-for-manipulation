<%num_links = 20%>
<%mass = 2.0%>
<%damping = 4.0%>
<%friction = 0.2%>
<%length = 4.0%>
<%radius = 0.025%>
<%link_length = length/num_links%>
<%link_mass = 10.0/num_links%>
<?xml version="1.0" ?>
<sdf version="1.5">
  <model name="rope">
    <pose>0 0 0.1 0 0 0</pose>
    <% for i in 0..num_links %>
        <link name="sphere_<%=i%>">
          <pose>0.100000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
          <inertial>
            <pose>0.000000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
            <mass>0.100000</mass>
            <inertia>
              <ixx>0.010000</ixx>
              <ixy>0.000000</ixy>
              <ixz>0.000000</ixz>
              <iyy>0.010000</iyy>
              <iyz>0.000000</iyz>
              <izz>0.010000</izz>
            </inertia>
          </inertial>
          <collision name="sphere_<%=i%>_collision">
            <pose>0.000000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
            <geometry>
              <sphere>
                <radius><%=radius%></radius>
              </sphere>
            </geometry>
          </collision>
          <visual name="sphere_<%=i%>_vis">
            <pose>0.000000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
            <geometry>
              <sphere>
                <radius><%=radius%></radius>
              </sphere>
            </geometry>
          </visual>
          <velocity_decay />
        </link>
        <link name="link_<%=i%>">
          <pose>0.100000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
          <inertial>
            <pose>0.000000 0.000000 0.000000 0.000000 -0.000000 0.000000</pose>
            <mass>0.100000</mass>
            <inertia>
              <ixx>0.010000</ixx>
              <ixy>0.000000</ixy>
              <ixz>0.000000</ixz>
              <iyy>0.010000</iyy>
              <iyz>0.000000</iyz>
              <izz>0.010000</izz>
            </inertia>
          </inertial>
          <collision name="link_<%=i%>_collision">
            <pose>0.100000 0.000000 0.000000 0.000000 1.570790 0.000000</pose>
            <geometry>
              <cylinder>
                <length><%=link_length%></length>
                <radius><%=radius%></radius>
              </cylinder>
            </geometry>
          </collision>
          <visual name="link_<%=i%>_vis">
            <pose>0.100000 0.000000 0.000000 0.000000 1.570790 0.000000</pose>
            <geometry>
              <cylinder>
                <length><%=link_length%></length>
                <radius>0<%=radius%></radius>
              </cylinder>
            </geometry>
          </visual>
          <velocity_decay />
        </link>
    <% end %>

    <% for i in 1..num_links %>
        <joint name="joint_<%=i%>_1" type="revolute">
          <child>sphere_<%=i%></child>
          <parent>sphere_<%=i-1%></parent>
          <axis>
            <xyz>0.000000 0.000000 1.000000</xyz>
            <limit>
              <lower>-0.700000</lower>
              <upper>0.700000</upper>
            </limit>
            <dynamics>
              <damping><%=damping%></damping>
              <friction><%=friction%></friction>
            </dynamics>
            <use_parent_model_frame>true</use_parent_model_frame>
          </axis>
        </joint>
        <joint name="joint_<%=i%>_2" type="revolute">
          <child>link_<%=i%></child>
          <parent>sphere_<%=i%></parent>
          <axis>
            <xyz>0.000000 1.000000 0.000000</xyz>
            <limit>
              <lower>-0.700000</lower>
              <upper>0.700000</upper>
            </limit>
            <dynamics>
              <damping><%=damping%></damping>
              <friction><%=friction%></friction>
            </dynamics>
            <use_parent_model_frame>true</use_parent_model_frame>
          </axis>
        </joint>
    <%end%>
</sdf>
